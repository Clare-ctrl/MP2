{"ast":null,"code":"import useFetchData from\"./FatchData\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import{useState,useMemo,useEffect}from\"react\";import\"./GalleryView.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GalleryView(){const location=useLocation();const isCarouselActive=location.pathname.startsWith(\"/carousel/\");const{data,loading}=useFetchData(\"gallery\");const[filterText,setFilterText]=useState('');const pokemonData=useMemo(()=>{return data!==null&&data!==void 0?data:[];},[data]);console.log(pokemonData);useEffect(()=>{setFilterText(\"all\");// reset whenever gallery is active\n},[location.key]);const filteredData=useMemo(()=>{if(!filterText||filterText===\"all\"){return pokemonData;}console.log(filterText);const needle=filterText.toLowerCase();return pokemonData.filter(item=>{var _item$types;return(_item$types=item.types)===null||_item$types===void 0?void 0:_item$types.some(t=>t.toLowerCase().includes(needle));});},[pokemonData,filterText]);const handleFilterChange=text=>setFilterText(text);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});console.log(filteredData);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"filter\",children:!isCarouselActive&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"fire\"),children:\"Fire\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"water\"),children:\"Water\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"grass\"),children:\"Grass\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"electric\"),children:\"Electric\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"poison\"),children:\"Poison\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"bug\"),children:\"Bug\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange(\"all\"),children:\"All\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-grid\",children:filteredData.map(item=>/*#__PURE__*/_jsx(Link,{to:\"/carousel/\".concat(item.id),className:\"card\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name})},item.id))})]});}","map":{"version":3,"names":["useFetchData","Link","useLocation","useState","useMemo","useEffect","jsx","_jsx","jsxs","_jsxs","GalleryView","location","isCarouselActive","pathname","startsWith","data","loading","filterText","setFilterText","pokemonData","console","log","key","filteredData","needle","toLowerCase","filter","item","_item$types","types","some","t","includes","handleFilterChange","text","children","className","onClick","map","to","concat","id","src","image","alt","name"],"sources":["/Users/mengmengfang/Desktop/mp2/src/components/GalleryView.tsx"],"sourcesContent":["import useFetchData from \"./FatchData\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport \"./GalleryView.css\";\n\n\ninterface Pokemon {\n  id: number;\n  name: string;\n  image: string;\n  types?: string[];\n}\n\nexport default function GalleryView() {\n  const location = useLocation(); \n  const isCarouselActive = location.pathname.startsWith(\"/carousel/\");\n\n  const { data, loading } = useFetchData(\"gallery\");\n  \n  const [filterText, setFilterText] = useState('');\n\n\n  const pokemonData: Pokemon[] = useMemo(() => { return data ?? [] } , [data]);\n  console.log(pokemonData);\n  useEffect(() => {\n  \n    setFilterText(\"all\"); // reset whenever gallery is active\n  }, [location.key]);\n\n  const filteredData = useMemo(() => {\n    if (!filterText || filterText === \"all\") { return pokemonData;}\n    console.log(filterText);\n    const needle = filterText.toLowerCase();\n    return pokemonData.filter((item) =>\n      \n      item.types?.some((t: string) => t.toLowerCase().includes(needle))\n    );\n  }, [pokemonData, filterText]);\n\n\n  const handleFilterChange = (text: string) => setFilterText(text);\n  \n  if (loading) return <p>Loading...</p>;\n  console.log(filteredData);\n  return (\n    <div>\n        <div className=\"filter\">\n      {!isCarouselActive && (\n        <div className=\"filter-buttons\">\n          <button onClick={() => handleFilterChange(\"fire\")}>Fire</button>\n          <button onClick={() => handleFilterChange(\"water\")}>Water</button>\n          <button onClick={() => handleFilterChange(\"grass\")}>Grass</button>\n          <button onClick={() => handleFilterChange(\"electric\")}>Electric</button>\n          <button onClick={() => handleFilterChange(\"poison\")}>Poison</button>\n          <button onClick={() => handleFilterChange(\"bug\")}>Bug</button>\n          <button onClick={() => handleFilterChange(\"all\")}>All</button>\n        </div>\n      )}\n      </div>\n      {/* Show results live */}\n      <div className=\"gallery-grid\">\n        {filteredData.map((item) => (\n          <Link to={`/carousel/${item.id}`} key={item.id} className=\"card\">\n            <img src={item.image} alt={item.name} />\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}